.row
  .span12
    -# Rails 2 needs - and Rails 3 needs =
    - form_for :node, :'data-remote' => true, :url => update_node_path(@node.handle), :html => { :'data-type' => 'html', :'data-method' => 'put', :id => 'update_node_form', :class => "form-horizontal" } do |f|
      -unless @node.allocated
        .control-group
          = f.label :target_platform, t('.target_platform'), :class => "control-label"
          .controls
            = select_tag :target_platform, options_for_select(option_default(@target_platforms, @node.target_platform, 'target_platform'), @node.target_platform), {:onchange => "showLicense(this)"}
        .control-group#licenseKey{:style => CrowbarService.require_license_key?(@node.target_platform) ? 'display:block' : 'display:none'}
          = f.label :license_key, t('.license_key'), :class => "control-label"
          .controls
            = text_field_tag :license_key, @node.license_key, :size => 20
      -else
        .control-group
          = f.label :target_platform, t('.target_platform'), :class => "control-label"
          .controls.control-text
            = @node.pretty_target_platform
        -if CrowbarService.require_license_key?(@node.target_platform)
          .control-group
            = f.label :license_key, t('.license_key'), :class => "control-label"
            .controls.control-text
              = @node.license_key
      .control-group
        = f.label :alias, t('.alias'), :class => "control-label"
        .controls
          = text_field_tag :alias, @node.alias(true), :size => 20
      .control-group
        = f.label :public_name, t('.public_name'), :class => "control-label"
        .controls
          = text_field_tag :public_name, @node.public_name(true), :size => 20
          %p.inline-hints= t('.public_name_hint')
      .control-group
        = f.label :description, t('.description'), :class => "control-label"
        .controls
          = text_field_tag :description, @node.description(true), :size => 40
      - if @node.display_set?('group')
        .control-group
          = f.label :group, t('.group'), :class => "control-label"
          .controls
            = text_field_tag :group, @node.group, :size => 20
      - else
        .control-group
          = f.label :group, t('.group'), :class => "control-label"
          .controls.control-text
            = "#{t '.default'}: "
            %b= @node.group
        .control-group
          %label.control-label
            = " #{t '.override'} "
          .controls
            = text_field_tag :group, @node.group(true), :size => 20
      -if @options[:show].include? :bios
        .control-group
          = f.label :bios, t('.bios'), :class => "control-label"
          -if @node.admin?
            .controls.control-text
              = t 'na'
          -else
            .controls
              = select_tag :bios, options_for_select(option_default(@options[:bios], @node.bios_set, 'bios'), @node.bios_set)
      -if @options[:show].include? :raid
        .control-group
          = f.label :raid, t('.raid'), :class => "control-label"
          -if @node.admin?
            .controls.control-text
              = t 'na'
          -else
            .controls
              = select_tag :raid,  options_for_select(option_default(@options[:raid], @node.raid_set, 'raid'), @node.raid_set)
      .form-horizontal
        .control-group
          %label.control-label
          .controls
            = link_to t('cancel'), nodes_path(:selected => @node.handle), :class => 'btn'
            %input.btn.btn-success{:type => "submit", :name => "submit", :value => t('.save')}
            -unless @node.allocated? or @node.admin?
              %input.btn.btn-success{:type => "submit", :name => "submit", :value => t('.allocate')}

:javascript

  function showLicense(obj)
  {
      if(obj[obj.selectedIndex].value == 'windows-6.2')
      {
          document.getElementById('licenseKey').style.display = 'block';
      }
      else
      {
          document.getElementById('licenseKey').style.display = 'none';
      }
  }
