- action = (user.id.nil?) ? :create : :update
= form_for(user,  :url => { :action => action } ) do |ff|
 %ul
  - user.errors.full_messages.each do |er|
   %li=er
 %table.center
  %tr
   %td= ff.label :username, t("user.username")
   %td= ff.label :email, t("user.email")
   -if action == :create
    %td= ff.label :password, t("user.password")
    %td= ff.label :password_confirmation, t("user.password_confirmation")
   %td.nowrap= ff.label :admin, t("user.is_admin")
   %td &nbsp;
  %tr
   %td= ff.text_field :username, :size => 20
   %td= ff.text_field :email, :size => 20
   -if action == :create
    %td= ff.password_field :password, :size => 20
    %td= ff.password_field :password_confirmation, :size => 20
   %td= ff.check_box :is_admin
   -if action == :create
    %td= ff.submit t("user.add"), :class=>'button'
   -else
    %td
     %span= ff.submit t("user.update"), :class=>'button' 
     = ff.submit t("user.cancel"),:name => 'cancel', :class=>'button'
    